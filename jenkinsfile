pipeline {
    agent any

    parameters {
	  string(name: 'payload', description: 'Payload received')
		}

    stages {
        stage('Test1 PR') {
	     when {
		branch 'PR-*'
		  }
             steps {
                   echo "+ Job has been runned        "
		   script {
			  sh 'printenv'	
//		 	  PR = sh(returnStdout: true, script: "gh api --jq .[].number /repos/ivngmz/jenkins/commits/$GIT_COMMIT/pulls ")
//                 	   echo "+ PR number -> $PR" 
//
//                 	   if (PR != ''){
//
//                 	       status_PR = sh(returnStdout: true, script: "gh api --jq .state /repos/ivngmz/jenkins/pulls/${PR} ")
//                 	       echo "++ Current PR status -> $status_PR"
//
//                 	       // Only merged PR will be checked
//                 	       if (status_PR == "MERGED") {
//                 	           labels = sh(returnStdout: true, script: "gh api --jq '.labels.[].name' /repos/ivngmz/jenkins/pulls/${PR}")
//                 	           echo "++ Found label:${labels}"
//						   }
//				}
			}  
                }
        }
    }
}
